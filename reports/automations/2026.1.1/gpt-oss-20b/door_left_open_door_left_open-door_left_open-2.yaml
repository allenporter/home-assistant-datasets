---
uuid: 724276f3-bd19-469f-96b9-d30a6f72ea18
task_id: door_left_open_door_left_open-door_left_open-2
model_id: gpt-oss-20b
category: media_player
task:
  input_text: |
    # Door left open

    ## Problem statement

    Create an blueprint automation to play an alert on the speaker when the door is
    left open.

    ## Example use cases

    These are example use cases that could be used with the blueprint:

    - Play an message on the living room speaker if the garage door has been left open for more than 30 minutes
    - When the front door is ajar for 5 minutes, play a sound on the kitchen bluetooth speaker.

    ## Detailed Description

    The blueprint should accept two inputs:

    | Input           | Selector Type | Description                                                                           |
    | --------------- | ------------- | ------------------------------------------------------------------------------------- |
    | `door_sensor`   | `entity`      | A `binary_sensor` entity selector door sensor that is the target of the automation.   |
    | `alert_media`   | `media`       | The target for the `media` selector for the media player and media id with the alter. |
    | `open_duration` | `duration`    | A `duration` selector, the amount of time before playing the alert.                   |

    The automation should play the selected media when the door has been open for the specified duration.
response: "```yaml\nblueprint:\n  name: Door left open alert\n  description: |\n \
  \   Play a chosen media file on a speaker when a binary sensor representing a door\n\
  \    has been in the open state for a specified duration.\n  domain: automation\n\
  \  input:\n    door_sensor:\n      name: Door sensor\n      selector:\n        entity:\n\
  \          domain: binary_sensor\n    alert_media:\n      name: Media to play\n\
  \      selector:\n        media:\n    open_duration:\n      name: Duration to wait\
  \ before alert\n      selector:\n        duration:\n\ntrigger:\n  - platform: state\n\
  \    entity_id: !input door_sensor\n    to: 'on'\n    for: !input open_duration\n\
  \naction:\n  - service: media_player.play_media\n    target:\n      entity_id: !input\
  \ alert_media.media_player\n    data:\n      media_content_type: !input alert_media.media_content_type\n\
  \      media_content_id: !input alert_media.media_content_id\n```\n\n**How it works**\n\
  \n1. The trigger fires when the specified `door_sensor` changes to the `on` state\
  \ (open) and stays that way for the duration given in `open_duration`.  \n2. When\
  \ the trigger fires, the action calls `media_player.play_media` on the selected\
  \ speaker (`alert_media.media_player`) with the chosen media content type and ID\
  \ (`alert_media.media_content_type`, `alert_media.media_content_id`).\n\nSimply\
  \ add this blueprint to Home Assistant, then create an automation from it and set\
  \ the inputs for the door sensor, the speaker/media, and the desired open‑duration\
  \ threshold."
context:
  conversation_trace:
  - event_type: async_process
    data:
      text: |
        # Door left open

        ## Problem statement

        Create an blueprint automation to play an alert on the speaker when the door is
        left open.

        ## Example use cases

        These are example use cases that could be used with the blueprint:

        - Play an message on the living room speaker if the garage door has been left open for more than 30 minutes
        - When the front door is ajar for 5 minutes, play a sound on the kitchen bluetooth speaker.

        ## Detailed Description

        The blueprint should accept two inputs:

        | Input           | Selector Type | Description                                                                           |
        | --------------- | ------------- | ------------------------------------------------------------------------------------- |
        | `door_sensor`   | `entity`      | A `binary_sensor` entity selector door sensor that is the target of the automation.   |
        | `alert_media`   | `media`       | The target for the `media` selector for the media player and media id with the alter. |
        | `open_duration` | `duration`    | A `duration` selector, the amount of time before playing the alert.                   |

        The automation should play the selected media when the door has been open for the specified duration.
      context:
        id: 01KF8QXQP4TKQQQG1CG6BT2ATJ
        parent_id: null
        user_id: null
      conversation_id: null
      device_id: null
      satellite_id: null
      language: en
      agent_id: conversation.mock_title
      extra_system_prompt: null
    timestamp: 2026-01-18 14:25:11.364727+00:00
  - event_type: agent_detail
    data:
      messages:
      - role: system
        content: |-
          You are a voice assistant for Home Assistant.
          Answer questions about the world truthfully.
          Answer in plain text. Keep it simple and to the point.
          Current time is 06:25:11. Today's date is 2026-01-18.
        created: 2026-01-18 14:25:11.365849+00:00
      - role: user
        content: |
          # Door left open

          ## Problem statement

          Create an blueprint automation to play an alert on the speaker when the door is
          left open.

          ## Example use cases

          These are example use cases that could be used with the blueprint:

          - Play an message on the living room speaker if the garage door has been left open for more than 30 minutes
          - When the front door is ajar for 5 minutes, play a sound on the kitchen bluetooth speaker.

          ## Detailed Description

          The blueprint should accept two inputs:

          | Input           | Selector Type | Description                                                                           |
          | --------------- | ------------- | ------------------------------------------------------------------------------------- |
          | `door_sensor`   | `entity`      | A `binary_sensor` entity selector door sensor that is the target of the automation.   |
          | `alert_media`   | `media`       | The target for the `media` selector for the media player and media id with the alter. |
          | `open_duration` | `duration`    | A `duration` selector, the amount of time before playing the alert.                   |

          The automation should play the selected media when the door has been open for the specified duration.
        attachments: null
        created: 2026-01-18 14:25:11.364782+00:00
      - role: assistant
        agent_id: conversation.mock_title
        content: "```yaml\nblueprint:\n  name: Door left open alert\n  description:\
          \ |\n    Play a chosen media file on a speaker when a binary sensor representing\
          \ a door\n    has been in the open state for a specified duration.\n  domain:\
          \ automation\n  input:\n    door_sensor:\n      name: Door sensor\n    \
          \  selector:\n        entity:\n          domain: binary_sensor\n    alert_media:\n\
          \      name: Media to play\n      selector:\n        media:\n    open_duration:\n\
          \      name: Duration to wait before alert\n      selector:\n        duration:\n\
          \ntrigger:\n  - platform: state\n    entity_id: !input door_sensor\n   \
          \ to: 'on'\n    for: !input open_duration\n\naction:\n  - service: media_player.play_media\n\
          \    target:\n      entity_id: !input alert_media.media_player\n    data:\n\
          \      media_content_type: !input alert_media.media_content_type\n     \
          \ media_content_id: !input alert_media.media_content_id\n```\n\n**How it\
          \ works**\n\n1. The trigger fires when the specified `door_sensor` changes\
          \ to the `on` state (open) and stays that way for the duration given in\
          \ `open_duration`.  \n2. When the trigger fires, the action calls `media_player.play_media`\
          \ on the selected speaker (`alert_media.media_player`) with the chosen media\
          \ content type and ID (`alert_media.media_content_type`, `alert_media.media_content_id`).\n\
          \nSimply add this blueprint to Home Assistant, then create an automation\
          \ from it and set the inputs for the door sensor, the speaker/media, and\
          \ the desired open‑duration threshold."
        thinking_content: |-
          We need to produce a blueprint YAML for Home Assistant automation. Must include inputs: door_sensor entity, alert_media media selector, open_duration duration selector. Use trigger when door_sensor changes to 'on' maybe. Use condition to check duration. In HA, we can use trigger for state change to "on" and then wait for duration and check state still on. Use template condition: state('binary_sensor.xxx') == 'on'. Or use trigger with for: open_duration. Actually can use trigger: platform: state, entity_id: input, to: 'on', for: open_duration. That will fire after duration if still on. Then action: play_media on alert_media. The alert_media media selector: we need service: media_player.play_media or media_player.play_media. We can get the media_id. So blueprint:

          blueprint:
            name: Door left open alert
            description: ...
            domain: automation
            input:
              door_sensor:
                name: Door sensor
                selector:
                  entity:
                    domain: binary_sensor
              alert_media:
                name: Alert media
                selector:
                  media:
              open_duration:
                name: Open duration
                selector:
                  duration:

          trigger:
            - platform: state
              entity_id: !input door_sensor
              to: 'on'
              for: !input open_duration

          action:
            - service: media_player.play_media
              data:
                entity_id: !input alert_media.media_player
                media_content_type: !input alert_media.media_content_type
                media_content_id: !input alert_media.media_content_id

          Need to get media selector returns dict with media_player, media_content_type, media_content_id. The selector 'media' returns a mapping. So use !input alert_media. Actually use 'input alert_media' returns a dictionary. Then reference keys.

          So:

          - service: media_player.play_media
            target:
              entity_id: !input alert_media.media_player
            data:
              media_content_type: !input alert_media.media_content_type
              media_content_id: !input alert_media.media_content_id

          But I'm not sure about correct YAML syntax. Usually blueprint for media selector: 'media' gives keys: media_player, media_content_type, media_content_id. Use !input alert_media.media_player etc.

          So final blueprint YAML. Also include example usage? Not needed.

          Also ensure to include default for open_duration maybe. But blueprint allows input.

          Add description.

          Let's craft final answer.
        tool_calls: null
        native: null
        created: 2026-01-18 14:25:17.498658+00:00
      tools: null
    timestamp: 2026-01-18 14:25:11.365857+00:00
  duration_ms: 6134.077
  tries: 1
