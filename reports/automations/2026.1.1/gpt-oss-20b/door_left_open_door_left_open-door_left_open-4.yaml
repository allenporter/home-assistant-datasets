---
uuid: 81c0978f-0a0d-4181-81f6-2958a4b0861b
task_id: door_left_open_door_left_open-door_left_open-4
model_id: gpt-oss-20b
category: media_player
task:
  input_text: |
    # Door left open

    ## Problem statement

    Create an blueprint automation to play an alert on the speaker when the door is
    left open.

    ## Example use cases

    These are example use cases that could be used with the blueprint:

    - Play an message on the living room speaker if the garage door has been left open for more than 30 minutes
    - When the front door is ajar for 5 minutes, play a sound on the kitchen bluetooth speaker.

    ## Detailed Description

    The blueprint should accept two inputs:

    | Input           | Selector Type | Description                                                                           |
    | --------------- | ------------- | ------------------------------------------------------------------------------------- |
    | `door_sensor`   | `entity`      | A `binary_sensor` entity selector door sensor that is the target of the automation.   |
    | `alert_media`   | `media`       | The target for the `media` selector for the media player and media id with the alter. |
    | `open_duration` | `duration`    | A `duration` selector, the amount of time before playing the alert.                   |

    The automation should play the selected media when the door has been open for the specified duration.
response: "Here is a Home‑Assistant automation blueprint that will play a chosen media\
  \ file on a media player when a door sensor has been open for a user‑defined amount\
  \ of time.\n\n```yaml\nblueprint:\n  name: Door left open alert\n  description:\
  \ |\n    Play a selected media file on a media player when a door (or any binary\n\
  \    sensor) has been in the *on* state for a specified duration.\n  domain: automation\n\
  \  source_url: https://github.com/yourrepo/door-alert-blueprint\n\n  # Inputs the\
  \ blueprint needs from the user\n  input:\n    door_sensor:\n      name: Door sensor\n\
  \      description: Binary sensor that indicates the door is open (on) or closed\
  \ (off)\n      selector:\n        entity:\n          domain: binary_sensor\n   \
  \ alert_media:\n      name: Alert media\n      description: |\n        Media player\
  \ and media id to play when the door is left open.\n        The media selector allows\
  \ you to pick a player and a media file.\n      selector:\n        media:\n    \
  \      media_class: music      # or audio, video, etc. as needed\n    open_duration:\n\
  \      name: Open duration\n      description: |\n        How long the door must\
  \ stay open before the alert is played.\n      selector:\n        duration:\n  \
  \        min: 0\n          max: 24:00:00\n          default: 00:30:00  # 30 minutes\
  \ by default\n\ntrigger:\n  - platform: state\n    entity_id: !input door_sensor\n\
  \    to: 'on'\n    for: !input open_duration\n\naction:\n  - service: media_player.play_media\n\
  \    target: !input alert_media\n    data:\n      # No extra data needed – the media\
  \ selector already contains\n      # entity_id, media_content_id, and media_content_type.\n\
  ```\n\n### How to use this blueprint\n\n1. **Import the blueprint**  \n   In Home\
  \ Assistant, go to *Configuration → Automations → Import* and paste the above YAML,\
  \ or drop it into your `blueprints` folder.\n\n2. **Create an automation**  \n \
  \  In the Automations UI, choose “Create automation from blueprint” and select this\
  \ one.  \n   Provide:\n   * The binary sensor that represents your door (e.g., `binary_sensor.garage_door`).\n\
  \   * The media player and media file you want to play (e.g., a notification file\
  \ on your living‑room speaker).\n   * The time you want to wait before alerting\
  \ (e.g., `00:05:00` for 5 minutes).\n\n3. **Save** and activate the automation.\n\
  \nWhen the selected door sensor turns on, the automation will wait for the specified\
  \ duration. If the door remains open for that entire period, the media file will\
  \ be played on the chosen media player. If the door closes before the timer expires,\
  \ no alert will be triggered."
context:
  conversation_trace:
  - event_type: async_process
    data:
      text: |
        # Door left open

        ## Problem statement

        Create an blueprint automation to play an alert on the speaker when the door is
        left open.

        ## Example use cases

        These are example use cases that could be used with the blueprint:

        - Play an message on the living room speaker if the garage door has been left open for more than 30 minutes
        - When the front door is ajar for 5 minutes, play a sound on the kitchen bluetooth speaker.

        ## Detailed Description

        The blueprint should accept two inputs:

        | Input           | Selector Type | Description                                                                           |
        | --------------- | ------------- | ------------------------------------------------------------------------------------- |
        | `door_sensor`   | `entity`      | A `binary_sensor` entity selector door sensor that is the target of the automation.   |
        | `alert_media`   | `media`       | The target for the `media` selector for the media player and media id with the alter. |
        | `open_duration` | `duration`    | A `duration` selector, the amount of time before playing the alert.                   |

        The automation should play the selected media when the door has been open for the specified duration.
      context:
        id: 01KF8QYBWQ0A29YYEVAX8BFBQS
        parent_id: null
        user_id: null
      conversation_id: null
      device_id: null
      satellite_id: null
      language: en
      agent_id: conversation.mock_title
      extra_system_prompt: null
    timestamp: 2026-01-18 14:25:32.055923+00:00
  - event_type: agent_detail
    data:
      messages:
      - role: system
        content: |-
          You are a voice assistant for Home Assistant.
          Answer questions about the world truthfully.
          Answer in plain text. Keep it simple and to the point.
          Current time is 06:25:32. Today's date is 2026-01-18.
        created: 2026-01-18 14:25:32.057028+00:00
      - role: user
        content: |
          # Door left open

          ## Problem statement

          Create an blueprint automation to play an alert on the speaker when the door is
          left open.

          ## Example use cases

          These are example use cases that could be used with the blueprint:

          - Play an message on the living room speaker if the garage door has been left open for more than 30 minutes
          - When the front door is ajar for 5 minutes, play a sound on the kitchen bluetooth speaker.

          ## Detailed Description

          The blueprint should accept two inputs:

          | Input           | Selector Type | Description                                                                           |
          | --------------- | ------------- | ------------------------------------------------------------------------------------- |
          | `door_sensor`   | `entity`      | A `binary_sensor` entity selector door sensor that is the target of the automation.   |
          | `alert_media`   | `media`       | The target for the `media` selector for the media player and media id with the alter. |
          | `open_duration` | `duration`    | A `duration` selector, the amount of time before playing the alert.                   |

          The automation should play the selected media when the door has been open for the specified duration.
        attachments: null
        created: 2026-01-18 14:25:32.055986+00:00
      - role: assistant
        agent_id: conversation.mock_title
        content: "Here is a Home‑Assistant automation blueprint that will play a chosen\
          \ media file on a media player when a door sensor has been open for a user‑defined\
          \ amount of time.\n\n```yaml\nblueprint:\n  name: Door left open alert\n\
          \  description: |\n    Play a selected media file on a media player when\
          \ a door (or any binary\n    sensor) has been in the *on* state for a specified\
          \ duration.\n  domain: automation\n  source_url: https://github.com/yourrepo/door-alert-blueprint\n\
          \n  # Inputs the blueprint needs from the user\n  input:\n    door_sensor:\n\
          \      name: Door sensor\n      description: Binary sensor that indicates\
          \ the door is open (on) or closed (off)\n      selector:\n        entity:\n\
          \          domain: binary_sensor\n    alert_media:\n      name: Alert media\n\
          \      description: |\n        Media player and media id to play when the\
          \ door is left open.\n        The media selector allows you to pick a player\
          \ and a media file.\n      selector:\n        media:\n          media_class:\
          \ music      # or audio, video, etc. as needed\n    open_duration:\n   \
          \   name: Open duration\n      description: |\n        How long the door\
          \ must stay open before the alert is played.\n      selector:\n        duration:\n\
          \          min: 0\n          max: 24:00:00\n          default: 00:30:00\
          \  # 30 minutes by default\n\ntrigger:\n  - platform: state\n    entity_id:\
          \ !input door_sensor\n    to: 'on'\n    for: !input open_duration\n\naction:\n\
          \  - service: media_player.play_media\n    target: !input alert_media\n\
          \    data:\n      # No extra data needed – the media selector already contains\n\
          \      # entity_id, media_content_id, and media_content_type.\n```\n\n###\
          \ How to use this blueprint\n\n1. **Import the blueprint**  \n   In Home\
          \ Assistant, go to *Configuration → Automations → Import* and paste the\
          \ above YAML, or drop it into your `blueprints` folder.\n\n2. **Create an\
          \ automation**  \n   In the Automations UI, choose “Create automation from\
          \ blueprint” and select this one.  \n   Provide:\n   * The binary sensor\
          \ that represents your door (e.g., `binary_sensor.garage_door`).\n   * The\
          \ media player and media file you want to play (e.g., a notification file\
          \ on your living‑room speaker).\n   * The time you want to wait before alerting\
          \ (e.g., `00:05:00` for 5 minutes).\n\n3. **Save** and activate the automation.\n\
          \nWhen the selected door sensor turns on, the automation will wait for the\
          \ specified duration. If the door remains open for that entire period, the\
          \ media file will be played on the chosen media player. If the door closes\
          \ before the timer expires, no alert will be triggered."
        thinking_content: "We need to produce a blueprint YAML. They want to play\
          \ an alert on the speaker when the door left open for duration. Input: door_sensor,\
          \ alert_media, open_duration. So blueprint triggers when door_sensor becomes\
          \ on? And we need to wait for open_duration. But better use trigger type\
          \ 'state' with to: 'on' and for: open_duration? That plays after open_duration.\
          \ But if door is closed before duration, no alert. So blueprint: trigger:\
          \ platform: state, entity_id: !input door_sensor, to: 'on', for: !input\
          \ open_duration. action: service: media_player.play_media, target: media_id:\
          \ !input alert_media. Also may need to ensure that door_sensor is a binary_sensor\
          \ and alert_media uses media_player service. Provide blueprint.yaml content.\
          \ Also we need to include header with domain, description, source_url maybe.\
          \ Use input. Let's craft blueprint.\n\nAlso we might need to use `target:\
          \ !input alert_media` but media_player.play_media requires media_content_type\
          \ and media_content_id. If the media selector returns a dict of entity_id\
          \ and media_id? Actually Home Assistant media selector returns a dict of\
          \ `entity_id` and `media_content_id`. But the YAML input type \"media\"\
          \ returns entity and media ID. In actions we can use `service: media_player.play_media`,\
          \ `target: !input alert_media`. According to documentation, you can use\
          \ `target: !input alert_media`. So that passes entity and media id. We'll\
          \ also need to specify `media_content_type: music` or maybe derived? But\
          \ media selector includes media_content_id; may need to also include media_content_type.\
          \ But we can let user specify. The media selector may allow selecting media\
          \ id and content type. In blueprint, to use it, we can do: `service: media_player.play_media`,\
          \ `target: !input alert_media`, `data: {}`? Actually typical example: `target:\
          \ !input media_player`, `data: {media_content_id: !input media_id, media_content_type:\
          \ !input media_type}`. But here we have \"media\" selector which returns\
          \ dict of both. The docs: The media selector returns an object with `entity_id`,\
          \ `media_content_id`, and `media_content_type`. Using `target: !input media`\
          \ should be fine. Let's check official blueprint examples: There is a blueprint\
          \ that uses media selector. For example:\n\n```\naction:\n  - service: media_player.play_media\n\
          \    target:\n      entity_id: !input media_player\n    data:\n      media_content_id:\
          \ !input media_id\n      media_content_type: music\n```\n\nBut if we use\
          \ media selector, the input type `media` returns the full selection. So\
          \ we could do:\n\n```\ntarget: !input alert_media\n```\n\nand maybe `data:\
          \ {}`. But I'm not 100% sure. Might require specifying data. But the \"\
          media\" selector will provide the entity and media_id. According to docs:\
          \ media selector: \"This selector allows selecting a media player and an\
          \ associated media id, which is used for playback.\" And the template for\
          \ action: `target: !input media_player` or `media: !input media`. Actually\
          \ let's check. In documentation: \"media\" selector returns `entity_id`\
          \ and `media_content_id`. Example: \n\n```\ninput:\n  my_media:\n    selector:\n\
          \      media:\n        media_class: music\n```\n\nThen usage: `target: !input\
          \ my_media`. That passes entity and media id. So we can use that. So action:\
          \ service: media_player.play_media, target: !input alert_media, data: {}.\n\
          \nBut we need to provide media_content_type. The selector may require specifying\
          \ the media type. But not necessary if we just provide media_content_id?\
          \ Usually media_player.play_media requires media_content_type. However,\
          \ the media selector includes it. So likely fine.\n\nWe'll produce blueprint\
          \ with domain: automation, description. Use 'title', 'mode', 'trigger',\
          \ 'input', 'action'. Provide full YAML. Also set 'trigger' to state with\
          \ 'for: !input open_duration'.\n\nLet's produce final answer."
        tool_calls: null
        native: null
        created: 2026-01-18 14:25:42.533457+00:00
      tools: null
    timestamp: 2026-01-18 14:25:32.057035+00:00
  duration_ms: 10477.677
  tries: 1
